<!DOCTYPE html>

<html lang="en">

<head>
   <meta charset="utf-8" />
   <meta name="viewport" content="width=device-width initial-scale=1"/>
   <title>Basic Git Commands</title>
   <link rel="shortcut icon" href="/asset/favicon.ico"/>
   <link rel="stylesheet" href="/asset/style.css"/>

   <!-- Google fonts -->
   <link rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Alegreya:400,400i,500,500i,700,900"/>
   <link rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Noto+Serif:400,400i,700"/>
   <link rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Alegreya+Sans:400,700"/>
   <link rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Noto+Sans:400,700"/>
   <link rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Source+Code+Pro:600"/>
   <link rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Noto+Serif+KR:400,700"/>
   <link rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Noto+Sans+KR:400,700"/>

   <!-- Mathjax configuration -->
   <script src="/asset/mathjax.js" async></script>

   <!-- random quotes -->
   <script src="/asset/quote.js" async></script>
</head>



<body>

<header id="header-banner">
   <h1 id="name-site">
      <a class="title-site" href="/">Photoluminescence</a>
      <span class="tagline-site">Math, Machines, and Music</span>
   </h1>
   <nav id="menu">
      <a class="button-menu" href="/stamp.html">by date</a>
      <span class="dingbat-menu">❦</span>
      <a class="button-menu" href="/genre.html">by genre</a>
      <span class="dingbat-menu">❦</span>
      <a class="button-menu" href="/series.html">by series</a>
      <span class="dingbat-menu">❦</span>
      <a class="button-menu" href="/tag.html">by tag</a>
   </nav>
   <img id="banner" src="/asset/banner.png" alt="banner">
</header>

<div class="essay">

<header id="header-post">
   <h2 class="heading-post">
      <span class="heading">Basic Git Commands</span>
   </h2>
   <p class="data-post">
      <a class="data-stamp" href="/page/february-2017.html">6 February 2017</a>
      <a class="data-genre" href="/page/notes.html">Negligible notes</a>
      <a class="data-series" href="/page/learning-git.html">Learning Git</a>
      <a class="data-tag" href="/page/git.html">Git</a>
<a class="data-tag" href="/page/github.html">GitHub</a>
<a class="data-tag" href="/page/programming-tools.html">Programming tools</a>
   </p>
</header>

<main class="document">
<div class="section">
<p class="paragraph">
<span class="phrase"><b class="serif-bold">Classifying Git actions</b></span>
</p>
</div>
<div class="section">
<p class="paragraph">
<span class="phrase"><span class="serif-roman">Here is a slowly growing summary of Git commands I find helpful, addressed the dear reader.</span></span> <span class="phrase"><span class="serif-roman">Again, I appreciate anyone to correct my misunderstandings, if any.</span></span>
</p>
<p class="paragraph">
<span class="phrase"><span class="serif-roman">Git is a gigantic beast,</span> <span class="serif-roman">and I try to group various actions by their point of departure and arrival.</span></span> <span class="phrase"><span class="serif-roman">Indeed, Git actions occur between the working tree, the local, and remote repo.</span></span> <span class="phrase"><span class="serif-roman">Commands</span> <code class="mono">add</code><span class="serif-roman">,</span> <code class="mono">commit</code><span class="serif-roman">,</span> <span class="serif-roman">and</span> <code class="mono">push</code><span class="serif-roman">,</span> <span class="serif-roman">among others, transfer data from the local end to the remote end.</span></span> <span class="phrase"><span class="serif-roman">Commands</span> <code class="mono">clone</code><span class="serif-roman">,</span> <code class="mono">fetch</code><span class="serif-roman">,</span> <code class="mono">pull</code><span class="serif-roman">,</span> <span class="serif-roman">and</span> <code class="mono">reset</code><span class="serif-roman">,</span> <span class="serif-roman">among others, transfer data from the remote end to the local end.</span></span>
</p>
<p class="paragraph">
<span class="phrase"><span class="serif-roman">By convention, commands meant to be run in a Bash shell is prefixed with a</span> <code class="mono">$</code><span class="serif-roman">,</span> <span class="serif-roman">and terms enclosed in</span> <code class="mono">&lt;&gt;</code> <span class="serif-roman">aren’t verbatim.</span></span> <span class="phrase"><span class="serif-roman">Remember that Git commands accept the working directory to be either the top directory (which we assume) or any of its subdirectory, except</span> <code class="mono">.git/</code><span class="serif-roman">,</span> <span class="serif-roman">the local repo itself.</span></span>
</p>
</div>
<div class="section">
<p class="paragraph">
<span class="phrase"><span class="serif-roman">For more information, Git man pages can be called by:</span></span>
</p>
<p class="paragraph">
<span class="phrase"><code class="mono">$ git help &lt;command&gt;</code></span>
</p>
<p class="paragraph">
<span class="phrase"><span class="serif-roman">Or equivalently:</span></span>
</p>
<p class="paragraph">
<span class="phrase"><code class="mono">$ git &lt;command&gt; --help</code></span>
</p>
</div>
<div class="section">
<p class="paragraph">
<span class="phrase"><b class="serif-bold">From the tree to the local: add</b></span>
</p>
</div>
<div class="section">
<p class="paragraph">
<span class="phrase"><span class="serif-roman">Action of adding stages changes in the working tree to the stash.</span></span> <span class="phrase"><span class="serif-roman">To add everything—new, modified, and deleted files:</span></span>
</p>
<p class="paragraph">
<span class="phrase"><code class="mono">$ git add .</code></span>
</p>
</div>
<div class="section">
<p class="paragraph">
<span class="phrase"><span class="serif-roman">To see a summary of staged changes:</span></span>
</p>
<p class="paragraph">
<span class="phrase"><code class="mono">$ git status</code></span>
</p>
</div>
<div class="section">
<p class="paragraph">
<span class="phrase"><span class="serif-roman">To show changes in the working tree not added:</span></span>
</p>
<p class="paragraph">
<span class="phrase"><code class="mono">$ git diff</code></span>
</p>
<p class="paragraph">
<span class="phrase"><span class="serif-roman">To compare the indexed files with the latest commit:</span></span>
</p>
<p class="paragraph">
<span class="phrase"><code class="mono">$ git diff --staged</code></span>
</p>
<p class="paragraph">
<span class="phrase"><span class="serif-roman">Instead, to compare a specific file in the working tree with the committed version of it:</span></span>
</p>
<p class="paragraph">
<span class="phrase"><code class="mono">$ git diff &lt;commit&gt; &lt;certain_file&gt;</code></span>
</p>
<p class="paragraph">
<span class="phrase"><span class="serif-roman">There will be a new page that summarizes the modification.</span></span> <span class="phrase"><span class="serif-roman">Navigation commands are identical to</span> <code class="mono">less</code><span class="serif-roman">,</span> <span class="serif-roman">and similar to Vim.</span></span> <span class="phrase"><span class="serif-roman">Hit</span> <code class="mono">j</code> <span class="serif-roman">or</span> <code class="mono">e</code> <span class="serif-roman">to forward one line,</span> <span class="serif-roman">and</span> <code class="mono">k</code> <span class="serif-roman">or</span> <code class="mono">y</code> <span class="serif-roman">to backward one line.</span></span> <span class="phrase"><span class="serif-roman">Hit</span> <code class="mono">f</code> <span class="serif-roman">to forward one window,</span> <span class="serif-roman">and</span> <code class="mono">b</code> <span class="serif-roman">to backward one window.</span></span> <span class="phrase"><span class="serif-roman">Hit</span> <code class="mono">d</code> <span class="serif-roman">to forward one-half window,</span> <span class="serif-roman">and</span> <code class="mono">u</code> <span class="serif-roman">to backward one-half window.</span></span> <span class="phrase"><span class="serif-roman">Finally, hit</span> <code class="mono">q</code> <span class="serif-roman">to quit.</span></span>
</p>
</div>
<div class="section">
<p class="paragraph">
<span class="phrase"><b class="serif-bold">From the tree to the local: commit</b></span>
</p>
</div>
<div class="section">
<p class="paragraph">
<span class="phrase"><span class="serif-roman">To commit your present files from the stash to the local repo, with a commit message:</span></span>
</p>
<p class="paragraph">
<span class="phrase"><code class="mono">$ git commit -m &quot;&lt;commit message&gt;&quot;</code></span>
</p>
<p class="paragraph">
<span class="phrase"><span class="serif-roman">A commit message should summarize the new work concisely, within 70 characters.</span></span> <span class="phrase"><span class="serif-roman">If you can’t, you should probably split your work into more than one commits.</span></span> <span class="phrase"><span class="serif-roman">To save space, it is conventional to use verbs in its base form, without period in the end.</span></span>
</p>
<p class="paragraph">
<span class="phrase"><span class="serif-roman">You may modify your commit message even after you commit, with:</span></span>
</p>
<p class="paragraph">
<span class="phrase"><code class="mono">$ git commit --amend</code></span>
</p>
<p class="paragraph">
<span class="phrase"><span class="serif-roman">An editor should open, showing the commit message and the status.</span></span> <span class="phrase"><span class="serif-roman">This file is saved as</span> <code class="mono">.git/COMMIT_EDITMSG</code><span class="serif-roman">.</span></span> <span class="phrase"><span class="serif-roman">I find it useful to edit the commit message this way, because I don’t have to backslash-escape special characters.</span></span> <span class="phrase"><span class="serif-roman">You may also add more explanatory lines below, separated from the commit message with a blank line.</span></span>
</p>
<p class="paragraph">
<span class="phrase"><span class="serif-roman">But what if you want to cancel the last 3 commits, in order to make a new commit from the present tree?</span></span> <span class="phrase"><span class="serif-roman">You can revert the head, and commit as usual.</span></span>
</p>
<p class="paragraph">
<span class="phrase"><code class="mono">$ git reset HEAD~3</code></span>
</p>
</div>
<div class="section">
<p class="paragraph">
<span class="phrase"><span class="serif-roman">Sometimes we add a tag to single out more significant commits, especially when a commit is released to the public.</span></span> <span class="phrase"><span class="serif-roman">A tag can be added when you have modified the working tree.</span></span> <span class="phrase"><span class="serif-roman">To add a tag to the latest commit:</span></span>
</p>
<p class="paragraph">
<span class="phrase"><code class="mono">$ git tag -a &lt;tag_number&gt;</code></span>
</p>
<p class="paragraph">
<span class="phrase"><span class="serif-roman">To simply list all tags:</span></span>
</p>
<p class="paragraph">
<span class="phrase"><code class="mono">$ git tag</code></span>
</p>
<p class="paragraph">
<span class="phrase"><span class="serif-roman">To push tags to the remote, you have to do:</span></span>
</p>
<p class="paragraph">
<span class="phrase"><code class="mono">$ git push --tags origin</code></span>
</p>
</div>
<div class="section">
<p class="paragraph">
<span class="phrase"><span class="serif-roman">The commit log lists commit hashes, authors, time stamps, and commit messages.</span></span> <span class="phrase"><span class="serif-roman">To view the commit log:</span></span>
</p>
<p class="paragraph">
<span class="phrase"><code class="mono">$ git log</code></span>
</p>
<p class="paragraph">
<span class="phrase"><span class="serif-roman">To make the log concise and informative:</span></span>
</p>
<p class="paragraph">
<span class="phrase"><code class="mono">$ git log --all --decorate --oneline --graph</code></span>
</p>
<p class="paragraph">
<span class="phrase"><span class="serif-roman">Pointer</span> <code class="mono">HEAD</code> <span class="serif-roman">refers to the current commit.</span></span> <span class="phrase"><span class="serif-roman">To retrieve its ancestors, two operators could be used.</span></span> <span class="phrase"><span class="serif-roman">Pointer</span> <code class="mono">HEAD~2</code> <span class="serif-roman">refers to the eldest parent of the parent of the head.</span></span> <span class="phrase"><span class="serif-roman">Pointer</span> <code class="mono">HEAD^3</code> <span class="serif-roman">means its third-to-last eldest parent of the head, and so on.</span></span> <span class="phrase"><span class="serif-roman">The two operators may be composed, for instance as</span> <code class="mono">HEAD^3~2</code><span class="serif-roman">.</span></span>
</p>
</div>
<div class="section">
<p class="paragraph">
<span class="phrase"><b class="serif-bold">From the local to the remote: push</b></span>
</p>
</div>
<div class="section">
<p class="paragraph">
<span class="phrase"><span class="serif-roman">To push all consistent commits from the local repo to the remote repo:</span></span>
</p>
<p class="paragraph">
<span class="phrase"><code class="mono">$ git push origin &lt;branch&gt;</code></span>
</p>
<p class="paragraph">
<span class="phrase"><span class="serif-roman">If flag</span> <code class="mono">-u</code> <span class="serif-roman">or</span> <code class="mono">--set-upstream</code> <span class="serif-roman">is added,</span> <span class="serif-roman">you set up a tracking reference so that you can type only</span> <code class="mono">git push</code> <span class="serif-roman">or</span> <code class="mono">git pull</code> <span class="serif-roman">and so on.</span></span>
</p>
<p class="paragraph">
<span class="phrase"><span class="serif-roman">If you have inconsistent commits, causing Git refuses to push,</span> <span class="serif-roman">you add the flag</span> <code class="mono">-f</code> <span class="serif-roman">or</span> <code class="mono">--force</code><span class="serif-roman">,</span> <span class="serif-roman">or use a</span> <code class="mono">+</code> <span class="serif-roman">before the branch as in</span> <code class="mono">+master</code><span class="serif-roman">.</span></span> <span class="phrase"><span class="serif-roman">This forces every local commit to overwrite its remote counterpart,</span> <span class="serif-roman">and it may cause the remote repo to lose data.</span></span> <span class="phrase"><span class="serif-roman">Think twice before using it!</span></span>
</p>
</div>
<div class="section">
<p class="paragraph">
<span class="phrase"><b class="serif-bold">From the remote to the local: clone, fetch, pull, reset</b></span>
</p>
</div>
<div class="section">
<p class="paragraph">
<span class="phrase"><span class="serif-roman">To clone everything from the remote repo into a new subdirectory of the current working directory (where the repo for the blog is taken for instance):</span></span>
</p>
<p class="paragraph">
<span class="phrase"><code class="mono">$ git clone &lt;remote_url&gt;</code></span>
</p>
</div>
<div class="section">
<p class="paragraph">
<span class="phrase"><span class="serif-roman">Fetching creates a local copy of a remote branch only, not affecting the working tree nor the head.</span></span> <span class="phrase"><span class="serif-roman">To fetch everything from a remote branch:</span></span>
</p>
<p class="paragraph">
<span class="phrase"><code class="mono">$ git fetch origin &lt;branch&gt;</code></span>
</p>
</div>
<div class="section">
<p class="paragraph">
<span class="phrase"><span class="serif-roman">Meanwhile, pulling not only fetches a remote branch as said, but also merges all conflicts into the corresponding local branch.</span></span> <span class="phrase"><span class="serif-roman">To pull from origin to a branch:</span></span>
</p>
<p class="paragraph">
<span class="phrase"><code class="mono">$ git pull origin &lt;branch&gt;</code></span>
</p>
<p class="paragraph">
<span class="phrase"><span class="serif-roman">It is more straightforward, I think, to fetch and merge explicitly, than just to pull.</span></span>
</p>
</div>
<div class="section">
<p class="paragraph">
<span class="phrase"><span class="serif-roman">If there are local changes, which you are willing to discard, we may reset the local branch to a remote branch:</span></span>
</p>
<p class="paragraph">
<span class="phrase"><code class="mono">$ git reset --hard origin/&lt;branch&gt;</code></span>
</p>
</div>
<div class="section">
<p class="paragraph">
<span class="phrase"><b class="serif-bold">From the local to the tree: reset, revert</b></span>
</p>
</div>
<div class="section">
<p class="paragraph">
<span class="phrase"><span class="serif-roman">By resetting, you may completely restore the working tree to a previous state, by:</span></span>
</p>
<p class="paragraph">
<span class="phrase"><code class="mono">$ git reset HEAD~2</code></span>
</p>
<p class="paragraph">
<span class="phrase"><span class="serif-roman">Flag</span> <code class="mono">--soft</code> <span class="serif-roman">rewrites changes not committed, leaving staged changes.</span></span> <span class="phrase"><span class="serif-roman">Flag</span> <code class="mono">--mixed</code> <span class="serif-roman">rewrites changes not committed or not staged, leaving changes in the working tree.</span></span> <span class="phrase"><span class="serif-roman">Flag</span> <code class="mono">--hard</code> <span class="serif-roman">rewrites changes not committed or not staged, and the working tree.</span></span>
</p>
</div>
<div class="section">
<p class="paragraph">
<span class="phrase"><span class="serif-roman">Meanwhile, by reverting, you may restore the working tree to a previous commit, but creating a new commit without rewriting the history:</span></span>
</p>
<p class="paragraph">
<span class="phrase"><code class="mono">$ git revert &lt;commit_pointer&gt;</code></span>
</p>
</div>
<div class="section">
<p class="paragraph">
<span class="phrase"><span class="serif-roman">Sometimes you want to rewrite the history, to combine several commits as one.</span></span> <span class="phrase"><span class="serif-roman">To combine the last 5 commits as one:</span></span>
</p>
<p class="paragraph">
<span class="phrase"><code class="mono">$ git reset --soft HEAD~5</code></span>
</p>
<p class="paragraph">
<span class="phrase"><span class="serif-roman">Afterwards, commit.</span></span>
</p>
</div>
<div class="section">
<p class="paragraph">
<span class="phrase"><span class="serif-roman">Instead, if you only want to reset one file, use:</span></span>
</p>
<p class="paragraph">
<span class="phrase"><code class="mono">git checkout HEAD~5 -- &lt;certainfile.txt&gt;</code></span>
</p>
</div>
<div class="break">
<span class="phrase">&emsp;</span> <span class="phrase">❦</span> <span class="phrase">&emsp;</span> <span class="phrase">❦</span> <span class="phrase">&emsp;</span> <span class="phrase">❦</span>
</div>
<div class="section">
<p class="paragraph">
<span class="phrase"><span class="serif-roman">❧</span> <em class="serif-italic">February 6, 2017;</em> <em class="serif-italic">revised July 30, 2021</em></span>
</p>
</div>
<div class="section">
<p class="paragraph">
<span class="phrase"><b class="serif-bold">References</b></span>
</p>
</div>
<div class="section">
<p class="paragraph">
<span class="phrase"><span class="serif-roman">❉</span> <span class="serif-roman">Git,</span> <a class="serif-roman" href="https://git-scm.com/documentation">Documentation</a></span>
</p>
<p class="paragraph">
<span class="phrase"><span class="serif-roman">❉</span> <span class="serif-roman">S Puisungnoen,</span> <a class="serif-roman" href="http://up1.github.io/git-guide/index.html">Git—the simple guide</a></span>
</p>
<p class="paragraph">
<span class="phrase"><span class="serif-roman">❉</span> <span class="serif-roman">R E Silverman, «Git Pocket Guide».</span></span> <span class="phrase"><span class="serif-roman">O’Reilly Media, 2013.</span></span>
</p>
<p class="paragraph">
<span class="phrase"><span class="serif-roman">❉</span> <span class="serif-roman">NDP Software,</span> <a class="serif-roman" href="http://www.ndpsoftware.com/git-cheatsheet.html">Git cheatsheet</a></span>
</p>
</div>
</main>

</div>

<footer id="footer-whole">
   <div id="footer-quote"></div>

   <div id="footer-signature">
      <div id="footer-left">
         <p class="footer-author">violapterin</p>
         <p class="footer-motto">VOLO NON FUGIA</p>
         <p class="footer-icon">
            <a class="icon-gmail" href="mailto:violapterin@gmail.com"></a>
            <a class="icon-github" href="http://github.com/violapterin/"></a>
            <a class="icon-facebook" href="http://facebook.com/violapterin/"></a>
            <a class="icon-twitter" href="http://twitter.com/violapterin/"></a>
         </p>
         <p class="footer-license">
         <a class="icon-license" href="https://creativecommons.org/licenses/by-sa/4.0/"></a>
         </p>
      </div>
      <div id="footer-right">
         <img class="footer-profile" src="/asset/profile.png" alt="profile">
      </div>
   </div>
</footer>


</body>

</html>